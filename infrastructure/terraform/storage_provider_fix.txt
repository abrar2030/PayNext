module "storage" {
  source = "./modules/storage"

  providers = {
    aws.dr_region = aws.dr_region
  }

  environment                    = var.environment
  vpc_id                        = module.vpc.vpc_id
  private_subnet_ids            = module.vpc.private_subnet_ids
  kms_key_id                    = module.security.kms_key_id
  data_retention_days           = var.data_retention_days
  backup_retention_days         = var.backup_retention_days
  replication_destination_region = var.dr_region
  enable_cross_region_replication = var.enable_cross_region_backup

  tags = local.common_tags
}
